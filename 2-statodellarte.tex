\section{Stato dell'arte}
Nel 2012, l'European Journal of Operational Research pubblicò un articolo chiamato \textit{Personnel scheduling: A literature review}\cite{VANDENBERGH2013367}, nel quale un team di sei ricercatori ha raccolto 291 articoli per dare un quadro generale sullo stato dell'arte per il problema di Personnel Scheduling dal 2004 fino ad allora, definendone inoltre una tassonomia. La tassonomia per i problemi di Personnel Scheduling si basa su quattro campi: caratteristiche del personale, vincoli assieme a misure di performance e flessibilità, metodi risolutivi e incorporazione dell'incertezza, area applicativa e applicabilità della ricerca.
\subsection{Caratteristiche del personale}
La prima caratteristica del personale che si definisce è la tipologia di contratto: la maggior parte delle pubblicazioni scientifiche riguardante questo problema trattanto problemi in cui il personale è per intero di tipo full-time. L'articolo di Hojati e Patil \cite{HOJATI201137} è uno dei pochi che va a trattare la categoria dei contratti part-time per intero. Nel caso dei contratti part-time, la gestione dei turni diventa molto più articolata, in quanto bisogna tenere in considerazione nuovi problemi, come la disponibilità dei dipendenti rispetti a giorni specifici o anche la richiesta necessaria per l'azienda.

In alcuni problemi, le attività possono richiedere alcune skill specifiche, rendendo così il personale considerato ancora più eterogeneo rispetto alla suddivisione "full-time/part-time"; si considerano anche i casi in cui tali attività possono essere svolte da persone che non possiedono le skill necessarie, comportando però un aumento del costo, in quanto saranno ovviamente meno efficienti rispetto al personale qualificato. Le skill specifiche sono in stretto legame con i livelli di produttivitià e anzianità: allo stesso modo della classificazione in base alle skill, un lavoratore meno produttivo equivarrà ad un costo aumentato. Sia la produttività che l'anzianità possono essere combinate assieme, anche con altre skill. In particolare, per l'anzianità possono essere previsti dei privilegi, come giorni di riposo consecutivi o un peso maggiore che viene dato alle loro preferenze per gli orari.

Un'altra classificazione si basa sul raggruppamento degli impiegati: questo è molto utile in problemi dove si considera lo scheduling di un team di persone e non ogni dipendente individualmente, come ad esempio problemi legati all'area dei trasporti, dove si lega il problema di Personnel Scheduling con quello del routing di veicoli. Esempi per questo tipo di problemi sono l'articolo di Sydney C.K. Chu\cite{CHU20071764} o anche l'articolo di Heil, Hoffmann e Buscher\cite{HEIL2020405}, che si preoccupa di inquadrare nel dettaglio i problemi di crew scheduling per il trasporto ferroviario.
%shine on you crazy diamond
Nell'articolo viene anche definita una tassonomia sulla base del tipo di decisioni che devono essere prese (assegnamento delle attività, sequenza dei turni, tempo, altro) e vengono separati in base a se vengono prese per interi team o per singoli membri del personale. Un esempio che evidenzia la tassonomia basata sulle decisioni si ritrova nell'articolo di Horn et al.\cite{Horn01102007}, che si occupa di trovare il modo più efficiente per la Forza di pattugliamento della Royal Australian Navy di utilizzare una nuova generazione di barche militari. Osservando la letteratura, si può notare che la maggior parte degli articoli si occupa solamente di creare una turnazione accettabile o una schedulazione dei lavori per i dipendenti, dato un carico di lavoro deterministico. Quasi mai, questo problema viene integrato con altri problemi di pianificazione, come la pianificazione del personale, previsione e adeguamento della distribuzione del carico di lavoro, distribuzione delle pause, assunzione e licenziamento, formazione,$\dots$. Diventa importante questo per la ricerca futura: cercare di unire tutte le decisioni in un unico problema di scheduling.

Anche la flessibilità con il tempo ha assunto un ruolo fondamentale, rendendo ancora di più complicata la formulazione dei modelli per i problemi considerati. La flessibilità può riguardare: sovrapponibilità dei turni, diversi orari di inizio, diverse lunghezze dei turni, diverse durate delle pause, $\dots$. 

Le scelte decisionali prese per lo scheduling diventano fondamentali non solo per questioni economiche, ma anche per la questione psicologica e fisica dei lavoratori. Xu e Hall\cite{XU2021807} pubblicarono un articolo riguardante la fatica lavorativa, introducendola come variabile all'interno dei problemi di scheduling: un lavoratore stanco rende di meno, aumentando di conseguenza il costo complessivo. L'articolo va ad analizzare quanto in letteratura venga misurata e analizzata la fatica e quale sia il suo impatto sulla performance, andando ad analizzare l'impatto che scelte di scheduling possono avere su di essa. Questo tema si lega strettamente al concetto di flessibilità, in quanto uno schema rigido non può rispondere ad una situazione variabile come la fatica di un lavoratore e bisognerà introdurre nuovi concetti, come quello delle rate-modifying activity (RMA, azioni che cambiano la velocità di produzione di una macchina) o delle micro-pause.

\subsection{Vincoli e Obiettivi}
Si differenziano i vincoli in hard e soft, ove con hard si indicano vincoli che non possono essere violati, mentre soft sono vincoli più flessibili. Nell'articolo vengono definite le seguenti categorie per i vincoli: copertura, temporali, equità e di equilibrio.

I vincoli di copertura rappresentano un aspetto chiave per i problemi di personnel scheduling: sia i vincoli hard che i vincoli soft di copertura stanno alla base dell'intero problema di scheduling, ovvero la scelta del numero di dipendenti necessari per coprire un carico di lavoro. I vincoli di copertura vanno contro solitamente la funzione obiettivo, che cerca di minimizzare la forza lavoro totale, in quanto direttamente legata al costo. La differenza tra capacità del personale minima e ottima è di fondamentale interesse per chi si occupa di questi problemi, in quanto rende necessario affrontare problemi come l'eccesso o il difetto di personale. All'interno dell'articolo, vengono riportati alcuni documenti che vanno anche a trattare problemi che vanno al di là della semplice gestione dei turni del personale, come la carenza di personale a livello internazionale per problemi di scheduling di infermieri: una possibile soluzione è quella di definire i vincoli di copertura come soft, prevedendo l'introduzione di personale esterno per coprire buchi all'interno della pianificazione e tenendo come obiettivo quello di generare un insieme di roster che minimizzino il numero di turni scoperti durante il lasso temporale considerato. L'utilizzo di vincoli hard implica quasi sempre, all'interno della letteratura trovata, un divieto per l'understaffing: nell'articolo, viene citato un singolo caso in cui la situazione è invertita ed è dovuto a motivi finanziari (sempre legati alla mancanza di personale). Altra cosa che si potrebbe implementare nella copertura riguarda le pause, però essendo un problema di tipo principalmente real-time non vengono trattate all'interno delle pubblicazioni sui problemi di personnel scheduling (Thompson e Pullman han dedicato un intero articolo soltanto alla gestione delle pause\cite{THOMPSON2007139}, andando ad analizzarne i pro e i contro di una organizzazione delle pause anticipata).

Se il personale può essere caratterizzato da delle skill, si introducono solitamente vincoli hard per assicurarsi la presenza di dipendenti qualificati per lo svolgimento di un particolare lavoro. I vincoli soft in questo caso possono venire utilizzati per indicare una possibile introduzione di personale non adatto all'attività considerata, implicando però un aumento del costo, o anche possono rappresentare il concetto di skill alternative, ovvero dipendenti che possiedono diverse skill ma che preferiscono evitare di coprire certi tipi di lavoro. Si distinguono tre diversi gruppi in base al grado di flessibilità delle competenze:
\begin{itemize}
	\item Le skill sono definibili a livello di dipendente, ovvero chi pianifica ha piena libertà di scegliere le skill per ogni membro del personale.
	\item L'insieme dei dipendenti viene gerarchizzato: dipendenti a livelli superiori possono eseguire attività dei dipendenti a livelli inferiori, mentre non vale il contrario; fattori su cui si può basare la gerarchia sono esperienza, dipendenti junior/senior, background formativo, $\dots$
	\item Le skill non possono essere sostituite, alcune attività richiedono skill specifiche e possono essere svolte solo da lavoratori con quelle particolari skill.
\end{itemize}

Altro problema importante è quello degli straordinari, il cui utilizzo può influenzare molto sulla flessibilità della copertura. Gli straordinari possono essere limitati settimanalmente, oppure possono essere studiati su orizzonti temporali più ampli, lasciando più libertà di gestione degli orari settimanali: un esempio nel quale lo studio delle ore complessive viene fatto mensilmente è il caso studiato nella tesi di Serena Cortopassi\cite{etd-04172014-181428}, dove viene studiato un problema di personnel scheduling per il personale de Il Gignoro, una residenza assistenziale per anziani. 

Le misure finanziarie prevedono costi differenti, come costo del personale, possibile costo relativo ad un particolare giorno della settimana, diversi costi per diverse skill, costo degli straordinari, costo legato allo svolgimento di particolari attività, $\dots$: minimizzare il costo è strettamente legato al minimizzare il numero di dipendenti usati, ma questo non significa che è solo questo ma è anzi un problema molto più complesso che va analizzato. Già modellare il costo del problema attorno al costo del personale invece che il numero dei dipendenti, si riesce ad ottenere un compromesso tra assunzione di dipendenti, straordinari, lavoratori occasionali e altro. Altri possibili costi possono essere costi di produzione, costi per chiamate perse o mancata produzione, costi differenti tra lavoratori full-time e part-time, costi di rifiuto, costi differenti per sede, $\dots$.

Spesso gli operatori vogliono anche garantire equità nella gestione degli orari per i dipendenti, che si può tradurre in più punti: distribuzione equa di weekend di riposo, un numero di turni sfavorevole bilanciato tra i vari dipendenti, gestione bilanciata per tipo di turno, quantità bilanciata di giorni di lavoro e di riposo (viene citato il lavoro di Lezaun et al.\cite{lezaun2007rostering}), gestione delle preferenze dei dipendenti (ad esempio, preferenze per certi tipi di turni o anche volere lavorare con specifici collaboratori), numero di giorni di riposo consecutivi), $\dots$.

\subsection{Metodi Risolutivi e Incertezza}
In letteratura, si trova un insieme veramente ampio e diversificato di tecniche risolutive adottate. Si dividono le tecniche usate in tre gruppi:
\begin{itemize}
	\item Programmazione matematica: programmazione intera, programmazione dinamica, goal programming, euristiche costruttive o migliorative.
	\item Simulazione, programmazione a vincoli, queuing.
	\item Altro: soluzioni meno frequenti come approssimazione lineare a tratti di una curva, analytic hierarchy process (AHP), modelli di fogli di calcolo e data envelopment analysis (DEA).
\end{itemize}
Il primo gruppo rappresenta il gruppo più ampio: il problema del personnel scheduling viene modellato come un programma lineare, intero o misto intero e la formulazione più usata è quella del Set Covering, introdotta da Dantzig. Il problema del \textit{Set Covering} consiste nel trovare la più piccola sotto-collezione di insiemi (sottoinsiemi dell'insieme universo) tale per cui l'unione dei suoi elementi sia equivalente all'insieme universo:
\begin{align*}
	\min \quad & \sum_{s\in S}x_s \\
	\text{s.t} & \sum_{s:e\in s}x_s\ge 1, \forall e\in U\\
	& x_s \in \{0, 1\}
\end{align*}
In particolare, nel caso del personnel scheduling, al posto dell'1 nel secondo vincolo si avrà il fabbisogno necessario per lo slot temporale considerato. Questa formulazione è molto comoda, perché permette di aggiungere a proprio piacimento vincoli aggiuntivi in base alle proprie necessità. 

Una tecnica che aiuta molto, in particolare per problemi di larga scala, è quella della decomposizione del problema: viene separato il problema in due parti, una più facile e una più complessa e per ognuna posso scegliere il metodo risolutivo da utilizzare. Diversi modi di applicare la decomposizione furono proposti da: Detienne et al.\cite{detienne2009cut} sfruttarono la decomposizione di Bender (problema principale rilassato è un problema di zaino multidimensionale a multiscelta, mentre ogni sotto problema è un problema di b-matching\footnote{Generalizzazione del problema base di matching per un grafo. Sia dato un grafo $G=(V,E)$, ad ogni vertice $v\in V$ viene assegnato una capacità $b(v)\in \mathbb{N}^+$: un b-matching è un sottoinsieme di archi tale che, per ogni $v$, il numero di archi incidenti a $v$ non superi la sua capacità $b(v)$.}, Bard e Wan\cite{bard2008workforce} \cite{bard2006task}. Assieme alla decomposizione, un'altra tecnica buona per problemi di grandi dimensioni è quella della generazione di colonne: quando le variabili in gioco sono troppe, si rischia di eccedere il limite di memoria assegnato per il problema, quindi vengono generate dinamicamente quando necessario\cite{IBMColonne} (vengono citati per questo approccio Beliën e Demeulemeester\cite{belien2008branch}). Tramite la decomposizione, si riesce ad utilizzare a rappresentare il problema con altri modelli oltre a quello del set covering, come ad esempio problemi di maximum flow.

Ultimo approccio molto utilizzato all'interno della programmazione matematica è quello delle metaeuristiche, che sono progettate in modo tale da trovare soluzioni ammissibili buone in tempi relativamente brevi o accettabili dai limiti imposti. Gli svantaggi delle metaeuristiche sosta nel fatto che non possono in modo dimostrabile né produrre soluzioni ottime né ridurre lo spazio di ricerca delle soluzioni. Gli algoritmi preferiti sono la tabu search e gli algoritmi genetici all'uso di algoritmi di ricottura simulata. Altre alternative sono: scatter search, ricerca locale iterata, variable neighborhood search, particle swarm optimization, algoritmi memetici, reti neurali, $\dots$.

Trattando invece l'incertezza, si differenziano tre tipi di incertezze che si possono ritrovare all'interno di questi problemi:
\begin{itemize}
	\item Incertezza della richiesta: carico del lavoro imprevedibile.
	\item Incertezza dell'arrivo: pattern imprevedibile dell'arrivo carico di lavoro (fallimenti della macchina, arrivo di chiamate per i call center).
	\item Incertezza della capacità: deviazione tra forza lavoro pianificata e effettiva.
\end{itemize}
Si dividono inoltre gli approcci in due tipi:
\begin{itemize}
	\item Deterministico: viene ignorata ogni forma di incertezza.
	\item Stocastico: viene considerata l'incertezza (non per forza tutti i tipi visti prima).
\end{itemize}
L'approccio deterministico è quello dominante. Non incorporare l'incertezza all'interno del modello non equivale però a considerare il carico di lavoro costante in ogni momento: vengono fatte analisi del carico di lavoro osservando i dati storici e facendone una stima. Per andare contro la variabilità del carico di lavoro, negli approcci deterministici può risultare d'aiuto l'utilizzo di buffer di capacità in modo tale da rendere il roster del personale molto più robusto.

Cause di incertezza relative ai dipendenti possono essere: malattie dei dipendenti, ritardi negli arrivi, perdita di capacità per via di risorse fuori servizio. L'incertezza di arrivo è di principale interesse per i sistemi di call center, i quali spesso devono aggiungere anche l'incertezza di richiesta.

\subsection{Aree di Applicazione}
Si distinguono sei aree di applicazione: servizi, trasporti, generale, manifattura, vendita al dettaglio (retail) e problemi di scheduling per il personale militare. Il problema più trattato riguarda quello della gestione dei turni degli infermieri e rappresenta una delle fondamenta in tutta la letteratura riguardante i problemi di scheduling.

\subsection{Rassegna bibliografica aggiuntiva}

Un articolo di Brucker et al.\cite{BRUCKER2011467}, pubblicato nel 2011, sempre dall'European Journal of Operational Research, va a studiare più dettagliatamente i modelli proposti e la complessità relativa per i problemi di Personnel Scheduling. Nell'articolo si rifanno alla classificazione delle aziende, proposta da De Causmaecker, in quattro categorie in base al tipo di problema riscontrato: pianificazione centrata sulla permanenza, pianificazione centrata sulla fluttuazione, pianificazione centrata sulla mobilità e pianificazione centrata sul progetto. Un problema di scheduling per il personale di un ospedale si differenzia molto rispetto a problemi di scheduling per il settore dei trasporti. Il problema che viene affrontato all'interno dell'articolo è quello di cercare di trovare un modello matematico generale che possa portare con sé caratteristiche comuni nei diversi problemi di scheduling del personale. Viene fornito un modello matematico generale per il problema studiato, che viene riportato, tralasciando l'ultima parte sui vincoli per la richiesta flessibile e il limite superiore per il numero di dipendenti assegnati:

"Vi è un orizzonte di pianificazione $[0,T]$ diviso in periodi $[t,t+1[$ con $t=0,1,\dots,T-1$. Durante l'orizzonte di pianificazione vi sono $m$ compiti da eseguire ($j=1,\dots,m$). $D_j(t)$ è il numero di dipendenti necessari per eseguire il compito $j$ nel periodo $[t,t+1[$. Viene chiamato il profilo di domanda (fabbisogno).

Si ha un insieme $E$ di $n$ dipendenti. Ad ogni $e\in E$ si ha un sottoinsieme $Q_e$ di compiti per cui $e$ è qualificato e può quindi essere assegnato; $e$ non può essere assegnato a compiti al di fuori di $Q_e$. Un pattern di lavoro per un dipendente $e$ si definisce con:
\begin{itemize}
	\item un vettore zero-uno $(w_e(t))^{T-1}_{t=0}$ dove $w_e(t)$ vale 1 se e solo se $e$ è disponibile nel periodo $[t,t+1[$ e
	\item l'assegnazione di compiti appartenenti a $Q_e$ per ogni periodo di tempo $[t,t+1[$ con $w_e(t)=1$.
\end{itemize}
I pattern di lavoro sono rappresentata da vettori binari $\pi=(\pi(j,t))$ ove $\pi(j,t)=1$ se e solo se $[t,t+1[$ è un periodo di lavoro nel quale il compito $j$ deve essere svolto.

Si definisce $P_e$ l'insieme di tutti i pattern lavorativi ammissibili per il dipendente $e$. Bisogna assegnare ai dipendenti $e\in E$ dei pattern lavorativi ammissibili tali per cui venga coperta la richiesta $D_j(t)$ per ogni task e tali per cui i costi relativi alle assegnazioni ai dipendenti sia minimizzato.

Si possono imporre anche "vincoli soft" nei pattern lavorativi e aggiungere una penalità $u(\pi_e)$ che va a definire di quanto un pattern $\pi_e$ vada a violare il vincolo soft. Possibili costi di assegnazione possono essere: la somma delle penalità di tutti i dipendenti assegnati, il numero di dipendenti richiesti, i costi per i dipendenti assegnati. Il modello può essere più o meno restrittivo in base al problema considerato: si può introdurre il concetto di richiesta flessibile, ove ogni compito $j$ ha una durata $p_j$ e deve essere eseguito entro una finestra temporale $[L_j, R_j[\supset [0,T]$ con $R_j-L_j\geq p_j$, ovvero $D_j\in {0,1}$ per $t=L_j, L_j+1,\dots, R_j-1$ tale che $\sum^{R_j-1}_{t=L_j} D_j(t)=p_j$.

Il problema può essere modellato come un problema lineare binario. Sia $x_{e\pi}$ una variabile binaria che vale 1 solo e soltanto se il pattern lavorativo $\pi$ viene assegnato al dipendente $e$. In aggiunta, sia $c_{e\pi}$ i costi dovuti all'assegnamento del pattern $\pi$ al lavoratore $e$. La formulazione sarà:
\begin{align*}
	& min\sum_{e\in E}\sum_{\pi \in P_e}c_{e\pi}x_{e\pi} \\
	&  \text{subject to} \\
	& \sum_{\pi \in P_e}x_{e\pi}\leq 1, e\in E \\
	& \sum_{e\in E}\sum_{\pi \in P_e} \pi(j,t)x_{e\pi}\ge D_j(t),
	\text{ for all } (j,t)\\
	& x_{e\pi}\in {0,1} \text{ for all } e\in E \text{ and } \pi \in P_e
\end{align*}
Viene assegnato al più un pattern $\pi$ al dipendente $e$. In alcuni casi, bisogna assegnare ad ogni dipendente un pattern lavorativo, cambiando il primo vincolo da disuguaglianza a uguaglianza pari ad uno."

Nel caso speciale per cui la richiesta per ogni compito $j$ è costante e ogni dipendente è disponibile in tutti i periodi, questo modello può essere formulato come un problema del flusso di costo minimo\footnote{Il problema del flusso di costo minimo (minimum-cost flow problem, abbreviato MCFP) è un problema di decisione e ottimizzazione che consiste nel trovare il modo meno costoso possibile di far passare un certo ammontare di flusso tramite una rete di flusso.} e può essere quindi risolto in tempi polinomiali. Tuttavia, nella realtà queste condizioni non vi sono quasi mai, quindi di norma un problema di scheduling appartiene alla classe dei problemi di tipo NP-Complete. Si è trovato anche che l'utilizzo di algoritmi di flusso di rete può essere utile per risolvere problemi di assegnamento dei turni ai dipendenti e dei dipendenti ai diversi compiti: questo può essere sfruttato all'interno delle euristiche utilizzate per lo scheduling del personale. 
%l'articolo seguente porta molta roba utile per il problema da me studiato

Un altro articolo, \textit{"Polynomially solvable personnel rostering problems"} \cite{SMET201667}, va a studiare i sottoproblemi che stanno alla base dei problemi di personnel scheduling, andando a separarli in problemi facili e difficili (in base al tempo risolutivo richiesto). Mediante l'utilizzo di trasformazioni di problemi differenti in problemi di flusso di costo minimo, è stato possibile identificare nuovi casi, rispetto ai quattro citati nell'introduzione, che possono essere risolti in tempi polinomiali. Per i vincoli di successione e di counter (numero di giorni lavorati e numero di turni lavorati per tipo), si è trovato che la differenza tra problemi semplici e difficil sta nella definizione dei vincoli a livello di giorno o a livello di turno. Conoscendo questo, è possibile non solo riformulare il problema (riportandolo a problemi già conosciuti, come i problemi di flusso), in quanto potrebbe rendere il problema trattabile computazionalmente, ma si può anche offrire approcci efficienti verso la risoluzione dei sottoproblemi che nascono dalla decomposizione del problema. 


In letteratura, sono riuscito a trovare una sola pubblicazione che parla direttamente del problema affrontato in questa tesi ed è un articolo di Melachrinoudis e Olafsson \cite{MELACHRINOUDIS1992121} del 1994. In questo articolo, viene fornito un modello di programmazione lineare intera per lo scheduling dei cassieri. Il modello viene eseguito in un ambiente basato su fogli di calcolo, rendendolo agevole per i dirigenti. Vengono usati tre pacchetti software: fogli di calcolo Lotus 1-2-3 in combinazione con "What's Best", un pacchetto di ottimizzazione sviluppato da LINDO. 
\begin{itemize}
	\item Un pacchetto di previsione del lavoro POS (collezionatore di dati che veniva eseguito sul computer mainframe del supermercato). Vengono solitamente salvati i dati relativi alle ultime quattro settimane e possono essere alterati tenendo in considerazione fattori secondari, come periodi festivi. Vengono definiti, sulla base di questi dati, un valore di massimo per i clienti in attesa alla cassa e un valore su come il carico di lavoro influenzi la produttività dei cassieri.
	\item Per rappresentare i dati, vengono usati i fogli di calcolo Lotus 1-2-3, in quanto agevoli all'utilizzo per i direttori dei negozi. Questo pacchetto fa da collegamento tra le altr e due parti del sistema ed è strutturato in quattro sezioni: sezione dei cassieri schedulati (si usano variabili decisionali per rappresentare il numero di cassieri schedulati nel turno di lunghezza $j$ che inizia al tempo $k$), sezione dei vincoli orari dei cassieri (viene usata dal dirigente, cambia le condizioni per cui un cassiere viene assegnato ad un turno), sezione del personale di cassa (contenente il fabbisogno per slot temporale) e sezione del totale (rappresenta la somma degli elementi delle tre colonne nella sezione del personale di cassa).
	\item "What's Best", un pacchetto di ottimizzazione sviluppato da LINDO.
\end{itemize}
Il modello fornito a What's Best si può trovare nell'articolo citato, si tiene precisare che la formulazione si basa sul problema di Set Covering.

Infine, si riporta l'articolo di Agnetis et al.\cite{BELIEN2025189}, ove viene descritto lo stato dell'arte per i problemi di scheduling per macchinari. I concetti riportati, per quanto distanti dal problema analizzato in questa tesi, possono essere comunque d'aiuto per affrontare il problema di personnel scheduling e vale anche il viceversa.  